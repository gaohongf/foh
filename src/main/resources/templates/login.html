<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>注册/登录</title>
    <link rel="stylesheet" type="text/css" href="../static/css/login.css" th:href="@{/css/login.css}"/>
    <script th:src="@{/js/jquery-3.6.0.min.js}" src="../static/js/jquery-3.6.0.min.js"></script>
</head>
<body>

<div id="particles-js">
    <form action="/user/login" method="post" th:action="@{/user/login}">
        <div class="login">
            <div class="login-top" style="text-align: center;">
                登录
            </div>
            <div id="container">
                <div class="login-center" style="margin-top: 100px;">
                    <div th:if="${error != null}" class="user_error"
                         style="position: relative;text-align: right;color: red;font-size: 15px" th:text="#{${error}}">
                        错误信息
                    </div>
                    <div class="login-center-img"><img src="../static/img/name.png" th:src="@{/img/name.png}" alt="">
                    </div>
                    <div class="login-center-input">
                        <input type="text" id="phone1" name="phone" value="" placeholder="请输入您的手机号"
                               onfocus="this.placeholder=''"
                               onblur="this.placeholder='请输入您的手机号'"/>
                        <label for="phone1" class="login-center-input-text">手机号</label>
                    </div>
                </div>
                <div class="login-center">
                    <div class="login-center-img"><img src="../static/img/password.png" th:src="@{/img/password.png}"
                                                       alt="锁"/>
                    </div>
                    <div class="login-center-input">
                        <input id="password1" type="password" name="password" placeholder="请输入您的密码"
                               onfocus="this.placeholder=''" onblur="this.placeholder='请输入您的密码'"/>
                        <label for="password1" class="login-center-input-text">密码</label>
                    </div>
                </div>
            </div>

            <div class="button">
                <input type="submit" value="登录" class="login-button" style="border: 0;"/>
                <div class="register-button">
                    注册
                </div>
            </div>
        </div>
    </form>
    <form method="post" th:action="@{/user/register}" th:object="${user}">
        <div class="register">
            <div class="register-top" style="text-align: center;">
                <div class="back">
                    <img src="../static/img/jiantou.png" th:src="@{/img/jiantou.png}" alt="箭头">
                </div>
                注册
            </div>
            <div class="regiter-center">
                <div class="regiter-center-img"><img alt="姓名" src="../static/img/name.png" th:src="@{/img/name.png}"/>
                </div>
                <div th:if="${#fields.hasErrors('phone')}" class="user_error"
                     style="position: relative;text-align: right;color: red;font-size: 15px" th:errors="*{phone}">
                    错误信息
                </div>
                <div class="regiter-center-input">
                    <input id="phone2" type="text" name="phone" placeholder="请输入您的手机号" th:field="*{phone}"
                           onfocus="this.placeholder=''"
                           onblur="this.placeholder='请输入您的手机号'"/>
                    <label for="phone2" class="regiter-center-input-text">手机号</label>
                </div>
            </div>
            <div class="regiter-center">
                <div class="regiter-center-img"><img alt="姓名" src="../static/img/name.png" th:src="@{/img/name.png}"/>
                </div>
                <div th:if="${#fields.hasErrors('name')}" class="user_error"
                     style="position: relative;text-align: right;color: red;font-size: 15px" th:errors="*{name}">
                    错误信息
                </div>
                <div class="regiter-center-input">
                    <input id="name" type="text" name="name" placeholder="请输入您的用户名" th:field="*{name}"
                           onfocus="this.placeholder=''"
                           onblur="this.placeholder='请输入您的用户名'"/>
                    <label for="name" class="regiter-center-input-text">用户名</label>
                </div>
            </div>
            <div class="regiter-center">
                <div class="regiter-center-img"><img alt="密码" src="../static/img/password.png"
                                                     th:src="@{/img/password.png}"/>
                </div>
                <div th:if="${#fields.hasErrors('password')}" class="user_error"
                     style="position: relative;text-align: right;color: red;font-size: 15px" th:errors="*{password}">
                    错误信息
                </div>
                <div class="regiter-center-input">
                    <input type="password" name="password" placeholder="请输入您的密码" th:field="*{password}"
                           onfocus="this.placeholder=''"
                           onblur="this.placeholder='请输入您的密码'" id="password2"/>
                    <label for="password2" class="regiter-center-input-text">密码</label>
                </div>
            </div>
            <div class="regiter-center" style="margin-bottom: 39px;">
                <div class="regiter-center-img"><img alt="密码" src="../static/img/password.png"
                                                     th:src="@{/img/password.png}">
                </div>
                <div class="regiter-center-input">
                    <input id="lodepassword" type="text" placeholder="确认密码" onfocus="this.placeholder=''"
                           onblur="this.placeholder='确认密码'" onkeyup="checkpassword()"/>
                    <label for="lodepassword" class="regiter-center-input-text">确认密码</label>
                </div>
            </div>
            <div class="regiter-center" style="margin-bottom: 0;">
                <span id="tishi"></span>
            </div>
            <div class="button">
                <input type="submit" id="submit" value="提交" class="sub-button" style="border: 0;"/>
                <div class="res-button">
                    重置
                </div>
            </div>
        </div>

    </form>

</div>
<script type="text/javascript">
    $(".register-button").click(function () {
        $(".login").css("display", "none")
        $(".register").css({
            "display": "block",
            "animation": "trans 1s ease 0s",
            "animation-fill-mode": "forwards"
        })
        $(".regiter-center-input input").css({
            "animation": "inputtrans 1s ease 0s",
            "animation-fill-mode": "forwards"
        })
    })
    $(".back img").click(function () {
        $(".login").css({
            "display": "block",
            "animation": "back 1s ease 0s",
            "animation-fill-mode": "forwards"
        })
        $(".register").css("display", "none")
    })

    function checkpassword() {
        let password = document.getElementById("a").value;
        let repassword = document.getElementById("b").value;

        if (password === repassword) {
            document.getElementById("submit").disabled = false;
            document.getElementById("tishi").innerHTML = "<br><font color='green'>两次密码输入一致</font>";
        } else {
            document.getElementById("tishi").innerHTML = "<br><font color='red'>两次输入密码不一致!</font>";
            document.getElementById("submit").disabled = true;
        }
    }
</script>
<script src="../static/js/particles.min.js" th:src="@{/js/particles.min.js}" type="text/javascript"
        charset="utf-8"></script>
<script src="../static/js/app.js" th:src="@{/js/app.js}" type="text/javascript" charset="utf-8"></script>
</body>
</html>